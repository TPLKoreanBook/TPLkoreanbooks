{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useReducer, useEffect } from 'react';\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'LOADING':\n      return {\n        loading: true,\n        data: null,\n        error: null\n      };\n\n    case 'SUCCESS':\n      return {\n        loading: false,\n        data: action.data,\n        error: null\n      };\n\n    case 'ERROR':\n      return {\n        loading: false,\n        data: null,\n        error: action.error\n      };\n\n    default:\n      throw new Error(`Unhandled action type: ${action.type}`);\n  }\n}\n\nfunction useAsync(callback) {\n  _s();\n\n  let deps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  let filterByCategory = arguments.length > 2 ? arguments[2] : undefined;\n  const [state, dispatch] = useReducer(reducer, {\n    loading: false,\n    data: null,\n    error: false\n  });\n\n  const fetchData = async () => {\n    dispatch({\n      type: 'LOADING'\n    });\n\n    try {\n      const data = await callback();\n      const filteredData = await data.filter(book => {\n        return book.category === filterByCategory;\n      });\n      console.log(filteredData);\n      dispatch({\n        type: 'SUCCESS',\n        filteredData\n      });\n    } catch (e) {\n      dispatch({\n        type: 'ERROR',\n        error: e\n      });\n    }\n  };\n\n  useEffect(() => {\n    fetchData(); // eslint-disable-next-line\n  }, deps);\n  return [state, fetchData];\n}\n\n_s(useAsync, \"yDz1NjU6UoVLgosyssVwUbVkFao=\");\n\nexport default useAsync;","map":{"version":3,"sources":["/Users/seumgminshin/Desktop/portfolio/lib/TPLkoreanbooks/src/hooks/useAsync.js"],"names":["useReducer","useEffect","reducer","state","action","type","loading","data","error","Error","useAsync","callback","deps","filterByCategory","dispatch","fetchData","filteredData","filter","book","category","console","log","e"],"mappings":";;AAAA,SAASA,UAAT,EAAqBC,SAArB,QAAsC,OAAtC;;AAEA,SAASC,OAAT,CAAiBC,KAAjB,EAAwBC,MAAxB,EAAgC;AAC/B,UAAQA,MAAM,CAACC,IAAf;AACC,SAAK,SAAL;AACC,aAAO;AACNC,QAAAA,OAAO,EAAE,IADH;AAENC,QAAAA,IAAI,EAAE,IAFA;AAGNC,QAAAA,KAAK,EAAE;AAHD,OAAP;;AAKD,SAAK,SAAL;AACC,aAAO;AACNF,QAAAA,OAAO,EAAE,KADH;AAENC,QAAAA,IAAI,EAAEH,MAAM,CAACG,IAFP;AAGNC,QAAAA,KAAK,EAAE;AAHD,OAAP;;AAKD,SAAK,OAAL;AACC,aAAO;AACNF,QAAAA,OAAO,EAAE,KADH;AAENC,QAAAA,IAAI,EAAE,IAFA;AAGNC,QAAAA,KAAK,EAAEJ,MAAM,CAACI;AAHR,OAAP;;AAKD;AACC,YAAM,IAAIC,KAAJ,CAAW,0BAAyBL,MAAM,CAACC,IAAK,EAAhD,CAAN;AApBF;AAsBA;;AAED,SAASK,QAAT,CAAkBC,QAAlB,EAAyD;AAAA;;AAAA,MAA7BC,IAA6B,uEAAtB,EAAsB;AAAA,MAAlBC,gBAAkB;AACxD,QAAM,CAACV,KAAD,EAAQW,QAAR,IAAoBd,UAAU,CAACE,OAAD,EAAU;AAC7CI,IAAAA,OAAO,EAAE,KADoC;AAE7CC,IAAAA,IAAI,EAAE,IAFuC;AAG7CC,IAAAA,KAAK,EAAE;AAHsC,GAAV,CAApC;;AAMA,QAAMO,SAAS,GAAG,YAAY;AAC7BD,IAAAA,QAAQ,CAAC;AAAET,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAR;;AACA,QAAI;AACH,YAAME,IAAI,GAAG,MAAMI,QAAQ,EAA3B;AACA,YAAMK,YAAY,GAAG,MAAMT,IAAI,CAACU,MAAL,CAAaC,IAAD,IAAU;AAChD,eAAOA,IAAI,CAACC,QAAL,KAAkBN,gBAAzB;AACA,OAF0B,CAA3B;AAGAO,MAAAA,OAAO,CAACC,GAAR,CAAYL,YAAZ;AACAF,MAAAA,QAAQ,CAAC;AAAET,QAAAA,IAAI,EAAE,SAAR;AAAmBW,QAAAA;AAAnB,OAAD,CAAR;AACA,KAPD,CAOE,OAAOM,CAAP,EAAU;AACXR,MAAAA,QAAQ,CAAC;AAAET,QAAAA,IAAI,EAAE,OAAR;AAAiBG,QAAAA,KAAK,EAAEc;AAAxB,OAAD,CAAR;AACA;AACD,GAZD;;AAcArB,EAAAA,SAAS,CAAC,MAAM;AACfc,IAAAA,SAAS,GADM,CAEf;AACA,GAHQ,EAGNH,IAHM,CAAT;AAKA,SAAO,CAACT,KAAD,EAAQY,SAAR,CAAP;AACA;;GA3BQL,Q;;AA6BT,eAAeA,QAAf","sourcesContent":["import { useReducer, useEffect } from 'react';\n\nfunction reducer(state, action) {\n\tswitch (action.type) {\n\t\tcase 'LOADING':\n\t\t\treturn {\n\t\t\t\tloading: true,\n\t\t\t\tdata: null,\n\t\t\t\terror: null\n\t\t\t};\n\t\tcase 'SUCCESS':\n\t\t\treturn {\n\t\t\t\tloading: false,\n\t\t\t\tdata: action.data,\n\t\t\t\terror: null\n\t\t\t};\n\t\tcase 'ERROR':\n\t\t\treturn {\n\t\t\t\tloading: false,\n\t\t\t\tdata: null,\n\t\t\t\terror: action.error\n\t\t\t};\n\t\tdefault:\n\t\t\tthrow new Error(`Unhandled action type: ${action.type}`);\n\t}\n}\n\nfunction useAsync(callback, deps = [], filterByCategory) {\n\tconst [state, dispatch] = useReducer(reducer, {\n\t\tloading: false,\n\t\tdata: null,\n\t\terror: false\n\t});\n\n\tconst fetchData = async () => {\n\t\tdispatch({ type: 'LOADING' });\n\t\ttry {\n\t\t\tconst data = await callback();\n\t\t\tconst filteredData = await data.filter((book) => {\n\t\t\t\treturn book.category === filterByCategory\n\t\t\t});\n\t\t\tconsole.log(filteredData)\n\t\t\tdispatch({ type: 'SUCCESS', filteredData });\n\t\t} catch (e) {\n\t\t\tdispatch({ type: 'ERROR', error: e });\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tfetchData();\n\t\t// eslint-disable-next-line\n\t}, deps);\n\n\treturn [state, fetchData];\n}\n\nexport default useAsync;"]},"metadata":{},"sourceType":"module"}